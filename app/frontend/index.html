<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Auth API Dashboard</title>

    <!-- Bootstrap 5 -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet"
    />

    <link rel="stylesheet" href="/static/style.css">
</head>
<body class="bg-dark text-light">

<nav class="navbar navbar-dark bg-black shadow-sm">
    <div class="container d-flex justify-content-between align-items-center">
        <span class="navbar-brand mb-0 h1">Auth API Dashboard</span>
        <span id="runtimeBadge" class="badge bg-secondary">
            Checking...
        </span>
    </div>
</nav>

<main class="container my-5">
    <div class="row justify-content-center g-4">

        <!-- Left: Auth card -->
        <div class="col-lg-5 col-md-6">
            <div class="card shadow-lg auth-card">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4">User Authentication</h3>

                    <div class="mb-3">
                        <label class="form-label">Username</label>
                        <input id="username" class="form-control" placeholder="Enter username">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Password</label>
                        <input id="password" class="form-control" type="password" placeholder="Enter password">
                    </div>

                    <div class="mb-4">
                        <label class="form-label">New Password (for change)</label>
                        <input id="newPassword" class="form-control" type="password" placeholder="New password">
                        <div class="form-text text-muted small">
                            Used only when you click "Change Password".
                        </div>
                    </div>

                    <!-- First row: main actions -->
                    <div class="d-flex flex-wrap gap-2 mb-2">
                        <button onclick="registerUser()" class="btn btn-auth flex-fill">
                            Register
                        </button>
                        <button onclick="loginUser()" class="btn btn-auth flex-fill">
                            Login
                        </button>
                        <button onclick="getUsers()" class="btn btn-auth flex-fill">
                            Users
                        </button>
                    </div>

                    <!-- Second row: extra actions -->
                    <div class="d-flex flex-wrap gap-2">
                        <button onclick="changePassword()" class="btn btn-auth-secondary flex-fill">
                            Change Password
                        </button>
                        <button onclick="deleteUserAccount()" class="btn btn-danger flex-fill">
                            Delete User
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right: Response card -->
        <div class="col-lg-5 col-md-6">
            <div class="card shadow-lg response-card">
                <div class="card-body">
                    <h5 class="card-title mb-3">API Response</h5>
                    <pre id="responseBox" class="response-box"></pre>
                </div>
            </div>
        </div>

    </div>
</main>

<script src="/static/app.js"></script>
<script>
    // Call runtime badge update on page load, then every 10 seconds
    if (typeof updateRuntimeBadge === "function") {
        updateRuntimeBadge();
        setInterval(updateRuntimeBadge, 10000);
    }
</script>
</body>
</html>
